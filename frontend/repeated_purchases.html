<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repeated Purchases in Districts of a City</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/openlayers/dist/ol.js"></script>
</head>
<body>
    <div class="container">
        <div class="inputs-section">
            <div class="header">
                <div class="logo-title-container">
                    <img src="imgs/bag.png" alt="MarketPulse360 Logo" class="logo">
                    <h1>MarketPulse360</h1>
                </div>
                <div class="home-title-container">
                    <h1>Home</h1>
                    <a href="main.html"><img src="imgs/home.png" alt="Home" class="home-icon"></a>
                </div>
            </div>
            <h2 class="title">Repeated Purchases in Districts of a City</h2>
            <div class="inputs">
                <div class="input-group">
                    <label for="city">City</label>
                    <select id="city">
                        <option value="Kaohsiung">Kaohsiung</option>
                        <option value="New Taipei">New Taipei</option>
                        <option value="Taichung">Taichung</option>
                        <option value="Tainan">Tainan</option>
                        <option value="Taipei">Taipei</option>
                        <option value="Taoyuan">Taoyuan</option>
                        <option value="Chiayi">Chiayi</option>
                        <option value="Hsinchu">Hsinchu</option>
                        <option value="Keelung">Keelung</option>
                        <option value="Changhua">Changhua</option>
                        <option value="Douliu">Douliu</option>
                        <option value="Hualien">Hualien</option>
                        <option value="Magong">Magong</option>
                        <option value="Miaoli">Miaoli</option>
                        <option value="Nantou">Nantou</option>
                        <option value="Pingtung">Pingtung</option>
                        <option value="Puzi">Puzi</option>
                        <option value="Taibao">Taibao</option>
                        <option value="Taitung">Taitung</option>
                        <option value="Toufen">Toufen</option>
                        <option value="Yilan">Yilan</option>
                        <option value="Yuanlin">Yuanlin</option>
                        <option value="Zhubei">Zhubei</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="product">Product Name</label>
                    <select id="product">
                        <option value="laptop">Laptop</option>
                        <option value="monitor">Monitor</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="timeframe">Time Frame</label>
                    <select id="timeframe">
                        <option value="monthly">Monthly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="yearly">Yearly</option>
                    </select>
                </div>
            </div>
            <button id="submit">Submit</button>
        </div>
        <div id="map" class="map-section"></div>
    </div>

    <script type="text/javascript">
        // Initialize OpenLayers Map
        var map = new ol.Map({
            target: 'map', // ID of the map container
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.XYZ({
                        attributions: '© MapTiler © OpenStreetMap contributors',
                        url: 'https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=uIMFZoCyLmKWTvmPj2JG', // Your MapTiler API Key
                        maxZoom: 19
                    })
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([121, 23.5]), // Centered more closely on Taiwan
                zoom: 8 // Adjust zoom level as needed
            })
        });

    
        // Function to handle the Submit button click
        function handleSubmit() {
            // Fetch selected values from dropdowns
            var city = document.getElementById('city').value;
            var productName = document.getElementById('product').value;
            var timeFrame = document.getElementById('timeframe').value;
    
            console.log('Selected City:', city);
            console.log('Selected Product:', productName);
            console.log('Selected Time Frame:', timeFrame);
    
            // Example: AJAX request to server for data based on selected values
            // This is a placeholder for your server request logic
            fetch('/your-server-endpoint', {
                method: 'POST', // or 'GET'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ city, productName, timeFrame })
            })
            .then(response => response.json())
            .then(data => {
                // Handle the data received from the server
                console.log('Data from server:', data);
    
                // Update the map based on received data
                // This will require additional logic depending on your data and requirements
            })
            .catch(error => console.error('Error:', error));
        }
    
        // Attach the handleSubmit function to the Submit button
        document.getElementById('submit').addEventListener('click', handleSubmit);
    </script>
    
</body>
</html>
